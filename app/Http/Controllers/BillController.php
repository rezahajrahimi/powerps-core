<?php
bolt_decrypt( __FILE__ , '8WFTqf'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnM7CnVzZSBBcHBcTW9kZWxzXEJpbGw7Cgp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7CgpjbGFzcyBCaWxsQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgcHVibGljIGZ1bmN0aW9uIGlzQmlsbElkRXhpc3QoJGJpbGxJZCkKICAgIHsKICAgICAgICAkZGF0YSA9IEJpbGw6OndoZXJlKCdiaWxsX2lkJywgJGJpbGxJZCktPmZpcnN0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gY3JlYXRlTmV3QmlsbChSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRiaWxsID0gbmV3IEJpbGwoKTsKICAgICAgICAkYmlsbC0+YWNjb3VudF9pZCA9ICRyZXF1ZXN0LT5hY2NvdW50X2lkOwogICAgICAgICRiaWxsLT5iaWxsX2lkID0gYWJzKGNyYzMyKHVuaXFpZCgpKSk7CiAgICAgICAgJGJpbGwtPmFtb3VudCA9ICRyZXF1ZXN0LT5hbW91bnQ7CiAgICAgICAgJGJpbGwtPmFtb3VudF9kb2xsYXIgPSAwLjA7CiAgICAgICAgaWYgKCRiaWxsLT5zYXZlKCkpIHsKICAgICAgICAgICAgcmV0dXJuICRiaWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGVOZXdCaWxsSW5Eb2xsYXIoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkYmlsbCA9IG5ldyBCaWxsKCk7CiAgICAgICAgJGJpbGwtPmFjY291bnRfaWQgPSAkcmVxdWVzdC0+YWNjb3VudF9pZDsKICAgICAgICAkYmlsbC0+YmlsbF9pZCA9IGFicyhjcmMzMih1bmlxaWQoKSkpOwogICAgICAgICRiaWxsLT5hbW91bnQgPSAwOwogICAgICAgICRiaWxsLT5hbW91bnRfZG9sbGFyID0gJHJlcXVlc3QtPmFtb3VudDsKICAgICAgICBpZiAoJGJpbGwtPnNhdmUoKSkgewogICAgICAgICAgICByZXR1cm4gJGJpbGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIGdldEJpbGxBbW91bnRCeUJpbGxJZCgkYmlsbElkKQogICAgewogICAgICAgICRkYXRhID0gQmlsbDo6d2hlcmUoJ2JpbGxfaWQnLCAkYmlsbElkKS0+Zmlyc3QoKTsKICAgICAgICBcTG9nOjppbmZvKCJiaWxsbGxsbGxsICRkYXRhIik7CgogICAgICAgIGlmICgkZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiAkZGF0YS0+YW1vdW50OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRCaWxsQW1vdW50RG9sbGFyQnlCaWxsSWQoJGJpbGxJZCkKICAgIHsKICAgICAgICAkZGF0YSA9IEJpbGw6OndoZXJlKCdiaWxsX2lkJywgJGJpbGxJZCktPmZpcnN0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuICRkYXRhLT5hbW91bnRfZG9sbGFyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQWdlbnQgRnVuY3Rpb25zCgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZU5ld0FnZW50VG9tYW5CaWxsVXJsKCRhbW91bnQpCiAgICB7CiAgICAgICAgJGFjY291bnRfaWQgPSBhdXRoKCdzYW5jdHVtJyktPnVzZXIoKS0+YWNjb3VudF9pZDsKCiAgICAgICAgJGJpbGwgPSBuZXcgQmlsbCgpOwogICAgICAgICRiaWxsLT5hY2NvdW50X2lkID0gJGFjY291bnRfaWQ7CiAgICAgICAgJGJpbGwtPmJpbGxfaWQgPSBhYnMoY3JjMzIodW5pcWlkKCkpKTsKICAgICAgICAkYmlsbC0+YW1vdW50ID0gJGFtb3VudDsKICAgICAgICAkYmlsbC0+YW1vdW50X2RvbGxhciA9IDAuMDsKICAgICAgICBpZiAoJGJpbGwtPnNhdmUoKSkgewogICAgICAgICAgICAkdHJDbnRybCA9IG5ldyBUcmFuc2FjdGlvbkNvbnRyb2xsZXIoKTsKICAgICAgICAgICAgJHRyUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KCk7CiAgICAgICAgICAgICR0clJlcXVlc3QtPmludm9pY2VJRCA9ICRiaWxsLT5iaWxsX2lkOwogICAgICAgICAgICAkdHJSZXF1ZXN0LT5hY2NvdW50X2lkID0gJGFjY291bnRfaWQ7CiAgICAgICAgICAgICR0clJlcXVlc3QtPmFtb3VudCA9ICRhbW91bnQ7CiAgICAgICAgICAgICRwYXltZW50TGluayA9ICR0ckNudHJsLT5hZGRfb3JkZXIoJHRyUmVxdWVzdCk7CiAgICAgICAgICAgIHJldHVybiAkcGF5bWVudExpbms7CiAgICAgICAgICAgIC8vICRweW1DbnRybCA9IG5ldyBQYXltZW50VHlwZUNvbnRyb2xsZXIoKTsKCiAgICAgICAgICAgIC8vICRvcGVuTGluayA9ICRweW1DbnRybC0+Z2V0WmFyaW5wYWxMaW5rKCk7CgogICAgICAgICAgICAvLyByZXR1cm4gIiRvcGVuTGluay8kYWNjb3VudF9pZC8kYmlsbC0+YmlsbF9pZC8kYmlsbC0+YW1vdW50IjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gY3JlYXRlTmV3QWdlbnREb2xsYXJCaWxsVXJsKCRhbW91bnQpCiAgICB7CiAgICAgICAgJGFjY291bnRfaWQgPSBhdXRoKCdzYW5jdHVtJyktPnVzZXIoKS0+YWNjb3VudF9pZDsKCiAgICAgICAgJGJpbGwgPSBuZXcgQmlsbCgpOwogICAgICAgICRiaWxsLT5hY2NvdW50X2lkID0gJGFjY291bnRfaWQ7CiAgICAgICAgJGJpbGwtPmJpbGxfaWQgPSBhYnMoY3JjMzIodW5pcWlkKCkpKTsKICAgICAgICAkYmlsbC0+YW1vdW50ID0gMDsKICAgICAgICAkYmlsbC0+YW1vdW50X2RvbGxhciA9ICRhbW91bnQ7CiAgICAgICAgaWYgKCRiaWxsLT5zYXZlKCkpIHsKICAgICAgICAgICAgJHRyQ3J5cHRvQ250cmwgPSBuZXcgVHJhbnNhY3Rpb25DcnlwdG9Db250cm9sbGVyKCk7CiAgICAgICAgICAgICAgICAkdHJSZXF1ZXN0ID0gbmV3IFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgICR0clJlcXVlc3QtPmludm9pY2VJRCA9ICRiaWxsLT5iaWxsX2lkOwogICAgICAgICAgICAgICAgJHRyUmVxdWVzdC0+YWNjb3VudF9pZCA9ICRhY2NvdW50X2lkOwogICAgICAgICAgICAgICAgJHRyUmVxdWVzdC0+YW1vdW50ID0gJGFtb3VudDsKICAgICAgICAgICAgICAgICRwYXltZW50TGluayA9ICR0ckNyeXB0b0NudHJsLT5hZGRfb3JkZXJfY3J5cHRvX2J5X25vd3BheW1lbnQoJHRyUmVxdWVzdCk7CgogICAgICAgICAgICAgICAgJGdlbmVyYWxDbnRybCA9IG5ldyBHZW5lcmFsQ29udHJvbGxlcigpOwogICAgICAgICAgICAgICAgJG5vd3BheW1lbnRMaW5rID0gJGdlbmVyYWxDbnRybC0+Z2V0X25vd3BheW1lbnRfcGF5bWVudF9saW5rX2Zyb21faHRtbCgkcGF5bWVudExpbmspOwogICAgICAgICAgICAgICAgcmV0dXJuICRub3dwYXltZW50TGluazsKICAgICAgICAgICAgLy8gJHB5bUNudHJsID0gbmV3IFBheW1lbnRUeXBlQ29udHJvbGxlcigpOwoKICAgICAgICAgICAgLy8gJG9wZW5MaW5rID0gJHB5bUNudHJsLT5nZXROb3dQYXltZW50c0xpbmsoKTsKCiAgICAgICAgICAgIC8vIHJldHVybiAiJG9wZW5MaW5rLyRhY2NvdW50X2lkLyRiaWxsLT5iaWxsX2lkLyRiaWxsLT5hbW91bnRfZG9sbGFyIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9Cn0K