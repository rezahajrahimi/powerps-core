<?php
bolt_decrypt( __FILE__ , 'qDYQn3'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnM7CnVzZSBBcHBcTW9kZWxzXFByb2R1Y3Q7CnVzZSBBcHBcTW9kZWxzXEJvdFVzZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKLy8gdXNlIGNhcmJvbgp1c2UgQ2FyYm9uXENhcmJvbjsKCmNsYXNzIFByb2R1Y3RDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdENvbmZpZ0FuZENoYW5nZVN0YXR1cygkc2VsZWN0ZWRQcm9kdWN0Q2F0SUQsICR1c2VySUQpCiAgICB7CiAgICAgICAgJGRhdGEgPSBQcm9kdWN0Ojp3aGVyZSgncHJvZHVjdF9jYXRlZ29yaWVzX2lkJywgJHNlbGVjdGVkUHJvZHVjdENhdElEKS0+d2hlcmUoJ2lzQWN0aXZlJywgdHJ1ZSktPmZpcnN0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgJGRhdGEtPmlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICRkYXRhLT5hY2NvdW50X2lkID0gJHVzZXJJRDsKICAgICAgICAgICAgJGRhdGEtPnVwZGF0ZSgpOwogICAgICAgICAgICByZXR1cm4gJGRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0Q29uZmlnQnlJZCgkaWQsICR1c2VySUQpCiAgICB7CiAgICAgICAgJGRhdGEgPSBQcm9kdWN0Ojp3aGVyZSgnaWQnLCAkaWQpLT53aGVyZSgnYWNjb3VudF9pZCcsICR1c2VySUQpLT53aXRoKCdwcm9kdWN0X2NhdGVnb3J5JyktPmZpcnN0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuICRkYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyUHJvZHVjdHNIaXN0b3J5QnlBY2NvdW50SUQoJHVzZXJJRCkKICAgIHsKICAgICAgICAkZGF0YSA9IFByb2R1Y3Q6OndoZXJlKCdhY2NvdW50X2lkJywgJHVzZXJJRCktPndpdGgoJ3Byb2R1Y3RfY2F0ZWdvcnknKS0+Z2V0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuICRkYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyUHJvZHVjdHNIaXN0b3J5QnlVc2VySURXaXRoUGFnaW5hdGlvbigkdXNlcklkKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRib3RVc2VyID0gQm90VXNlcjo6d2hlcmUoJ2lkJywgJHVzZXJJZCktPmZpcnN0KCk7CiAgICAgICAgICAgICRhY2NvdW50SUQgPSAkYm90VXNlci0+YWNjb3VudF9pZDsKICAgICAgICAgICAgJGRhdGEgPSBQcm9kdWN0Ojp3aGVyZSgnYWNjb3VudF9pZCcsICRhY2NvdW50SUQpCiAgICAgICAgICAgICAgICAtPndpdGgoJ3Byb2R1Y3RfY2F0ZWdvcnknKQogICAgICAgICAgICAgICAgLT5wYWdpbmF0ZSgxMCwgWycqJ10sICdwYWdlJyk7CiAgICAgICAgICAgIHJldHVybiAkZGF0YTsKICAgICAgICB9IGNhdGNoIChcVGhyb3dhYmxlICR0aCkgewogICAgICAgICAgICBcTG9nOjppbmZvKCJUaHJvd2FibGU6ICAkdGgiKTsKCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKCdTZXJ2ZXIgRXJyb3InLCA1MDApOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRBY3RpdmVQcm9kdWN0c0J5UHJvZHVjdENhdElEKCRzZWxlY3RlZFByb2R1Y3RDYXRJRCkKICAgIHsKICAgICAgICAkZGF0YSA9IFByb2R1Y3Q6OndoZXJlKCdwcm9kdWN0X2NhdGVnb3JpZXNfaWQnLCAkc2VsZWN0ZWRQcm9kdWN0Q2F0SUQpLT53aGVyZSgnaXNBY3RpdmUnLCB0cnVlKS0+Z2V0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuICRkYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBhZGROZXdQcm9kdWN0RGV0YWlscyhSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRkYXRhID0gbmV3IFByb2R1Y3QoKTsKICAgICAgICAkZGF0YS0+cHJvZHVjdF9jYXRlZ29yaWVzX2lkID0gJHJlcXVlc3QtPnByb2R1Y3RfY2F0ZWdvcmllc19pZDsKICAgICAgICAkZGF0YS0+Y29uZmlncyA9ICRyZXF1ZXN0LT5jb25maWdzOwogICAgICAgICRkYXRhLT5zdWJzY3JpcHRpb25fbGluayA9ICRyZXF1ZXN0LT5zdWJzY3JpcHRpb25fbGluazsKICAgICAgICAkZGF0YS0+cGFuZWxfbGluayA9ICRyZXF1ZXN0LT5wYW5lbF9saW5rOwogICAgICAgICRkYXRhLT5yZW1hcmsgPSAkcmVxdWVzdC0+cmVtYXJrOwogICAgICAgICRkYXRhLT5kZWFjdGl2ZV9ieV9hZG1pbiA9IGZhbHNlOwogICAgICAgIGlmICgkZGF0YS0+c2F2ZSgpKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+Z2V0QWN0aXZlUHJvZHVjdHNCeVByb2R1Y3RDYXRJRCgkcmVxdWVzdC0+cHJvZHVjdF9jYXRlZ29yaWVzX2lkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIGFkZE9yVXBkYXRlUHJvZHVjdERldGFpbHNCeVN1YnNjcmlwdGlvbkxpbmsoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkZGF0YSA9IFByb2R1Y3Q6OndoZXJlKCdzdWJzY3JpcHRpb25fbGluaycsICRyZXF1ZXN0LT5zdWJzY3JpcHRpb25fbGluayktPmZpcnN0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgJGRhdGEtPmFjY291bnRfaWQgPSAkcmVxdWVzdC0+YWNjb3VudF9pZDsKICAgICAgICAgICAgJGRhdGEtPnVwZGF0ZSgpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAkZGF0YSA9IG5ldyBQcm9kdWN0KCk7CiAgICAgICAgJGRhdGEtPnByb2R1Y3RfY2F0ZWdvcmllc19pZCA9ICRyZXF1ZXN0LT5wcm9kdWN0X2NhdGVnb3JpZXNfaWQ7CiAgICAgICAgJGRhdGEtPmNvbmZpZ3MgPSAkcmVxdWVzdC0+Y29uZmlnczsKICAgICAgICAkZGF0YS0+c3Vic2NyaXB0aW9uX2xpbmsgPSAkcmVxdWVzdC0+c3Vic2NyaXB0aW9uX2xpbms7CiAgICAgICAgJGRhdGEtPnBhbmVsX2xpbmsgPSAkcmVxdWVzdC0+cGFuZWxfbGluazsKICAgICAgICAkZGF0YS0+aXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICAkZGF0YS0+YWNjb3VudF9pZCA9ICRyZXF1ZXN0LT5hY2NvdW50X2lkOwogICAgICAgICRkYXRhLT5yZW1hcmsgPSAkcmVxdWVzdC0+cmVtYXJrOwogICAgICAgICRkYXRhLT5kZWFjdGl2ZV9ieV9hZG1pbiA9IGZhbHNlOwogICAgICAgIGlmICgkZGF0YS0+c2F2ZSgpKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gYWRkQXV0b21hdGVkUHJvZHVjdERldGFpbHMoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkZGF0YSA9IG5ldyBQcm9kdWN0KCk7CiAgICAgICAgJGRhdGEtPnByb2R1Y3RfY2F0ZWdvcmllc19pZCA9ICRyZXF1ZXN0LT5wcm9kdWN0X2NhdGVnb3JpZXNfaWQ7CiAgICAgICAgJGRhdGEtPmNvbmZpZ3MgPSAkcmVxdWVzdC0+Y29uZmlnczsKICAgICAgICAkZGF0YS0+c3Vic2NyaXB0aW9uX2xpbmsgPSAkcmVxdWVzdC0+c3Vic2NyaXB0aW9uX2xpbms7CiAgICAgICAgJGRhdGEtPnBhbmVsX2xpbmsgPSAkcmVxdWVzdC0+cGFuZWxfbGluazsKICAgICAgICAkZGF0YS0+aXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICAkZGF0YS0+YWNjb3VudF9pZCA9ICRyZXF1ZXN0LT5hY2NvdW50X2lkOwogICAgICAgICRkYXRhLT5yZW1hcmsgPSAkcmVxdWVzdC0+cmVtYXJrOwogICAgICAgICRkYXRhLT5kZWFjdGl2ZV9ieV9hZG1pbiA9IGZhbHNlOwogICAgICAgIGlmICgkZGF0YS0+c2F2ZSgpKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+Z2V0QWN0aXZlUHJvZHVjdHNCeVByb2R1Y3RDYXRJRCgkcmVxdWVzdC0+cHJvZHVjdF9jYXRlZ29yaWVzX2lkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIGdldExhc3RJbnNlcnRlZFByb2R1Y3RJZCgpCiAgICB7CiAgICAgICAgJGRhdGEgPSBQcm9kdWN0OjpvcmRlckJ5KCdpZCcsICdkZXNjJyktPmZpcnN0KCk7CiAgICAgICAgaWYgKCRkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuICRkYXRhLT5pZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZGVsZXRlUHJvZHVjdCgkaWQpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGRhdGEgPSBQcm9kdWN0OjpmaW5kKCRpZCk7CiAgICAgICAgICAgIGlmICgkZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAkY2F0SWQgPSAkZGF0YS0+cHJvZHVjdF9jYXRlZ29yaWVzX2lkOwogICAgICAgICAgICAgICAgJGRhdGEtPmRlbGV0ZSgpOwoKICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+Z2V0QWN0aXZlUHJvZHVjdHNCeVByb2R1Y3RDYXRJRCgkY2F0SWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oZmFsc2UsIDQwMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChcVGhyb3dhYmxlICR0aCkgewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihmYWxzZSwgNTAwKTsKICAgICAgICB9CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZGVsZXRlUHJvZHVjdEJ5UHJvZHVjdElEKCRpZCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkZGF0YSA9IFByb2R1Y3Q6OndoZXJlKCdpZCcsICRpZCktPmZpcnN0KCk7CiAgICAgICAgICAgIGlmICgkZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAkZGF0YS0+ZGVsZXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbih0cnVlLCAyMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oZmFsc2UsIDQwMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChcVGhyb3dhYmxlICR0aCkgewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihmYWxzZSwgNTAwKTsKICAgICAgICB9CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TGFzdEJ1eWVyc0J5Q2F0SWRBbmRDb3VudCgkcHJvZHVjdF9jYXRlZ29yaWVzX2lkLCAkY291bnQpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGRhdGEgPSBQcm9kdWN0Ojp3aGVyZSgncHJvZHVjdF9jYXRlZ29yaWVzX2lkJywgJHByb2R1Y3RfY2F0ZWdvcmllc19pZCktPndoZXJlKCdpc0FjdGl2ZScsIGZhbHNlKS0+d2l0aCgndXNlcicpLT5vcmRlckJ5KCdpZCcsICdkZXNjJyktPnRha2UoJGNvdW50KS0+Z2V0KCk7CiAgICAgICAgICAgIGlmICgkZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbigkZGF0YSwgMjAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKGZhbHNlLCA0MDEpOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oZmFsc2UsIDUwMCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRDb3VudE9mUHJvZHVjdFNlbGxlZFN1bW1lcnlCeUNhdElEKCRwcm9kdWN0X2NhdGVnb3JpZXNfaWQpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGxhc3QzMCA9ICR0aGlzLT5nZXRDb3VudE9mU2VsbFByb2R1Y3RCWUNhdElkQW5kTW9udGgoJHByb2R1Y3RfY2F0ZWdvcmllc19pZCwgMSk7CiAgICAgICAgICAgICRsYXN0OTAgPSAkdGhpcy0+Z2V0Q291bnRPZlNlbGxQcm9kdWN0QllDYXRJZEFuZE1vbnRoKCRwcm9kdWN0X2NhdGVnb3JpZXNfaWQsIDMpOwogICAgICAgICAgICAkbGFzdDE4MCA9ICR0aGlzLT5nZXRDb3VudE9mU2VsbFByb2R1Y3RCWUNhdElkQW5kTW9udGgoJHByb2R1Y3RfY2F0ZWdvcmllc19pZCwgNik7CiAgICAgICAgICAgICRsYXN0MzY1ID0gJHRoaXMtPmdldENvdW50T2ZTZWxsUHJvZHVjdEJZQ2F0SWRBbmRNb250aCgkcHJvZHVjdF9jYXRlZ29yaWVzX2lkLCAxMik7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsn2YXYp9mHINqv2LDYtNiq2YcnID0+ICRsYXN0MzAsICfYs9mHINmF2KfZhyDar9iw2LTYqtmHJyA9PiAkbGFzdDkwLCAn2LTYtCDZhdin2Ycg2q/YsNi02KrZhycgPT4gJGxhc3QxODAsICfbjNqp2LPYp9mEINqv2LDYtNiq2YcnID0+ICRsYXN0MzY1XSwgMjAwKTsKICAgICAgICB9IGNhdGNoIChcVGhyb3dhYmxlICR0aCkgewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihmYWxzZSwgNTAwKTsKICAgICAgICB9CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q291bnRPZlNlbGxQcm9kdWN0QllDYXRJZEFuZE1vbnRoKCRwcm9kdWN0X2NhdGVnb3JpZXNfaWQsICRtb250aCkKICAgIHsKICAgICAgICAvLyBnZXQgY291bnQgb2YgUHJvZHVjdCBpbiBsYXN0IG1vbnRoICBieSBpZAogICAgICAgICRmcm9tRGF0ZSA9IENhcmJvbjo6bm93KCktPnN1Yk1vbnRoKCktPnN0YXJ0T2ZNb250aCgpLT50b0RhdGVTdHJpbmcoKTsKICAgICAgICAkdGlsbERhdGUgPSBDYXJib246Om5vdygpLT5zdWJNb250aCgpLT5lbmRPZk1vbnRoKCRtb250aCktPnRvRGF0ZVN0cmluZygpOwoKICAgICAgICAkZGF0YSA9IFByb2R1Y3Q6OndoZXJlKCdwcm9kdWN0X2NhdGVnb3JpZXNfaWQnLCAkcHJvZHVjdF9jYXRlZ29yaWVzX2lkKQogICAgICAgICAgICAtPndoZXJlQmV0d2VlbigndXBkYXRlZF9hdCcsIFskZnJvbURhdGUsICR0aWxsRGF0ZV0pCiAgICAgICAgICAgIC0+Y291bnQoKTsKICAgICAgICByZXR1cm4gJGRhdGE7CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TGFzdFByb2R1Y3RTZWxsZWQoJGNvdW50KQogICAgewogICAgICAgICRkYXRhID0gUHJvZHVjdDo6d2l0aChbJ3VzZXInLCAncHJvZHVjdF9jYXRlZ29yeSddKQogICAgICAgICAgICAtPm9yZGVyQnkoJ2lkJywgJ2Rlc2MnKQogICAgICAgICAgICAtPnRha2UoJGNvdW50KQogICAgICAgICAgICAtPmdldCgpOwogICAgICAgIHJldHVybiAkZGF0YTsKICAgIH0KCn0K