<?php
bolt_decrypt( __FILE__ , 'G0jAtj'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnM7CnVzZSBBcHBcTW9kZWxzXFByb3h5Owp1c2UgQXBwXE1vZGVsc1xJbmJvdW5kOwoKdXNlIElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0OwoKY2xhc3MgUHJveHlDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QWN0aXZlUHJveGllc0J5UGFubmVsSUQoJHBhbm5lbElEKXsKICAgICAgICAkcHJveGllcyA9IFByb3h5Ojp3aGVyZSgncGFubmVsX2lkJywgJHBhbm5lbElEKS0+d2hlcmUoJ2lzX2FjdGl2ZScsIHRydWUpCiAgICAgICAgLT53aXRoKCdpbmJvdW5kcycpCiAgICAgICAgLT5nZXQoKTsKICAgICAgICByZXR1cm4gJHByb3hpZXM7CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0UHJveGllc0J5UGFubmVsSUQoJHBhbm5lbElEKXsKICAgICAgICAkcHJveGllcyA9IFByb3h5Ojp3aGVyZSgncGFubmVsX2lkJywgJHBhbm5lbElEKQogICAgICAgIC0+d2l0aCgnaW5ib3VuZHMnKQogICAgICAgIC0+Z2V0KCk7CiAgICAgICAgcmV0dXJuICRwcm94aWVzOwogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIGFkZE5ld1Byb3h5KFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHByb3h5ID0gbmV3IFByb3h5KCk7CiAgICAgICAgICAgICRwcm94eS0+cGFubmVsX2lkID0gJHJlcXVlc3QtPnBhbm5lbF9pZDsKICAgICAgICAgICAgJHByb3h5LT50eXBlID0gJHJlcXVlc3QtPnR5cGU7CiAgICAgICAgICAgICRwcm94eS0+aXNfYWN0aXZlID0gJHJlcXVlc3QtPmlzX2FjdGl2ZTsKICAgICAgICAgICAgJHByb3h5LT5zYXZlKCk7CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oZmFsc2UsIDUwMCk7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVByb3h5KFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHByb3h5ID0gUHJveHk6OmZpbmQoJHJlcXVlc3QtPmlkKTsKICAgICAgICAgICAgJHByb3h5LT5wYW5uZWxfaWQgPSAkcmVxdWVzdC0+cGFubmVsX2lkOwogICAgICAgICAgICAkcHJveHktPnR5cGUgPSAkcmVxdWVzdC0+dHlwZTsKICAgICAgICAgICAgJHByb3h5LT5pc19hY3RpdmUgPSAkcmVxdWVzdC0+aXNfYWN0aXZlOwogICAgICAgICAgICBpZiAoJHByb3h5LT51cGRhdGUoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihmYWxzZSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKFxUaHJvd2FibGUgJHRoKSB7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKGZhbHNlLCA1MDApOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBkZWxldGVQcm94eSgkaWQpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHByb3h5ID0gUHJveHk6OmZpbmQoJGlkKTsKICAgICAgICAgICAgaWYgKCRwcm94eS0+ZGVsZXRlKCkpIHsKICAgICAgICAgICAgICAgICRpbmJvdW5kID0gSW5ib3VuZDo6d2hlcmUoJ3Byb3h5X2lkJywgJGlkKS0+Z2V0KCk7CiAgICAgICAgICAgICAgICAkaW5ib3VuZC0+ZWFjaC0+ZGVsZXRlKCk7CiAgICAgICAgICAgICAgICBpZiAoJGluYm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAkaW5ib3VuZC0+ZGVsZXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKGZhbHNlLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oZmFsc2UsIDUwMCk7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIHJlQWN0aXZlUHJveHkoJGlkKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRwcm94eSA9IFByb3h5OjpmaW5kKCRpZCk7CiAgICAgICAgICAgICRwcm94eS0+aXNfYWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgJHByb3h5LT51cGRhdGUoKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oZmFsc2UsIDUwMCk7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIGRlQWN0aXZlUHJveHkoJGlkKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRwcm94eSA9IFByb3h5OjpmaW5kKCRpZCk7CiAgICAgICAgICAgICRwcm94eS0+aXNfYWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICRwcm94eS0+dXBkYXRlKCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gY2F0Y2ggKFxUaHJvd2FibGUgJHRoKSB7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKGZhbHNlLCA1MDApOwogICAgICAgIH0KICAgIH0KfQo=